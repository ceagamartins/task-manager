<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>Task Manager</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Ãcones -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        body {
            background: linear-gradient(135deg, #93a9c7, #b5b5b6);
            min-height: 100vh;
            color: rgb(0, 0, 0);
        }

        .card-custom {
            background: #6983ac;
            border: none;
            border-radius: 15px;
        }

        .form-control {
            background-color: #eaedf2;
            color: rgb(244, 12, 12);
            border: 1px solid #334155;
        }

        .form-control:focus {
            background-color: #eaedf2;
            color: rgb(0, 0, 0);
            border-color: #3b82f6;
            box-shadow: none;
        }

        .list-group-item {
            background-color: #f0f0f0;
            color: rgb(3, 3, 3);
            border: 1px solid #334155;
        }

        .badge-concluida {
            background-color: #22c55e;
        }

        .badge-pendente {
            background-color: #f59e0b;
        }
    </style>
</head>

<body>

    <div class="container py-5">

        <div class="text-center mb-5">
            <h1 class="fw-bold">ðŸš€ Task Manager</h1>
            <p class="fw-bold">Gerencie suas tarefas de forma simples</p>
        </div>

        <div class="card card-custom p-4 shadow-lg mb-4">
            <form id="formTarefa" class="row g-3">
                <div class="col-md-5">
                    <input type="text" id="titulo" class="form-control" placeholder="TÃ­tulo da tarefa" required>
                </div>
                <div class="col-md-5">
                    <input type="text" id="descricao" class="form-control" placeholder="DescriÃ§Ã£o" required>
                </div>
                <div class="col-md-2 d-grid">
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-plus-circle"></i> Criar
                    </button>
                </div>
            </form>
        </div>

        <div class="card card-custom p-4 shadow-lg">
            <h4 class="mb-3">ðŸ“‹ Lista de Tarefas</h4>
            <ul id="listaTarefas" class="list-group"></ul>
        </div>

    </div>

    <script>
        async function carregarTarefas() {
            const response = await fetch("/tarefas");
            const tarefas = await response.json();

            const lista = document.getElementById("listaTarefas");
            lista.innerHTML = "";

            tarefas.forEach(t => {
                lista.innerHTML += `
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                    <strong>${t.titulo}</strong><br>
                    <small class="text-secondary">${t.descricao}</small>
                </div>
                <span class="badge ${t.concluida ? 'badge-concluida' : 'badge-pendente'}">
                    ${t.concluida ? 'ConcluÃ­da' : 'Pendente'}
                </span>
            </li>
        `;
            });
        }

        document.getElementById("formTarefa").addEventListener("submit", async function (e) {
            e.preventDefault();

            const titulo = document.getElementById("titulo").value;
            const descricao = document.getElementById("descricao").value;

            await fetch("/tarefas", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    titulo: titulo,
                    descricao: descricao,
                    concluida: false
                })
            });

            document.getElementById("formTarefa").reset();
            carregarTarefas();
        });

        carregarTarefas();
    </script>

</body>

</html>